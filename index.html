<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Evaluation Demo</title>
</head>
<body>

<h2>外部評分測試</h2>

<select id="category">
  <option value="A">分類 A</option>
  <option value="B">分類 B</option>
</select>

<br><br>

<button onclick="saveScore()">送出評分</button>

<p id="status"></p>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
  import { getFirestore, addDoc, collection } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBqSDWpIR_Bm2CVdnObkkuopOBrxgoXlH0",
    authDomain: "tcswg-ai-qa.firebaseapp.com",
    projectId: "tcswg-ai-qa"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  window.saveScore = async function () {
    const category = document.getElementById("category").value;

    try {
      await addDoc(collection(db, "scores"), {
        category: category,
        timestamp: new Date()
      });

      document.getElementById("status").innerText = "✅ 成功寫入 Firestore";
    } catch (error) {
      document.getElementById("status").innerText = "❌ 寫入失敗";
      console.error(error);
    }
  }
</script>

</body>
</html>
